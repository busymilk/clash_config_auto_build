# ğŸŒ åœ°ç†ä½ç½®æ£€æµ‹åŠŸèƒ½ä½¿ç”¨æŒ‡å—

## ğŸ“‹ åŠŸèƒ½æ¦‚è¿°

æ–°å¢çš„åœ°ç†ä½ç½®æ£€æµ‹åŠŸèƒ½å¯ä»¥ï¼š
1. **è‡ªåŠ¨æ£€æµ‹èŠ‚ç‚¹å‡ºå£IP** - é€šè¿‡ä»£ç†è·å–çœŸå®çš„å‡ºå£IPåœ°å€
2. **ç²¾ç¡®è¯†åˆ«åœ°ç†ä½ç½®** - ä½¿ç”¨å¤šä¸ªGeoIPæœåŠ¡ç¡®ä¿å‡†ç¡®æ€§
3. **æ™ºèƒ½é‡å‘½åèŠ‚ç‚¹** - æ ¹æ®å®é™…åœ°ç†ä½ç½®é‡æ–°å‘½åèŠ‚ç‚¹
4. **æ‰©å±•åœ°åŒºæ”¯æŒ** - æ–°å¢å°æ¹¾ã€éŸ©å›½ã€å¾·å›½ã€åŠ æ‹¿å¤§ã€æ¾³å¤§åˆ©äºšç­‰åœ°åŒº

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. åŸºç¡€ä½¿ç”¨ (ä»…å»¶è¿Ÿæµ‹è¯•)
```bash
# ä¼ ç»Ÿæ¨¡å¼ï¼šåªæµ‹è¯•å»¶è¿Ÿï¼Œä¸æ£€æµ‹åœ°ç†ä½ç½®
python scripts/node_tester_with_geoip.py \
  --input-file all_unique_nodes.yaml \
  --output healthy_nodes_list.yaml \
  --clash-path /usr/local/bin/mihomo
```

### 2. å¯ç”¨åœ°ç†ä½ç½®æ£€æµ‹
```bash
# å®Œæ•´æ¨¡å¼ï¼šå»¶è¿Ÿæµ‹è¯• + åœ°ç†ä½ç½®æ£€æµ‹ + èŠ‚ç‚¹é‡å‘½å
python scripts/node_tester_with_geoip.py \
  --input-file all_unique_nodes.yaml \
  --output healthy_nodes_list.yaml \
  --clash-path /usr/local/bin/mihomo \
  --enable-geoip \
  --geoip-workers 5 \
  --geoip-timeout 20 \
  --save-geoip-details
```

### 3. å‚æ•°è¯´æ˜

#### åŸºç¡€å‚æ•°
- `--input-file`: è¾“å…¥çš„èŠ‚ç‚¹é…ç½®æ–‡ä»¶
- `--output-file`: è¾“å‡ºçš„å¥åº·èŠ‚ç‚¹æ–‡ä»¶
- `--clash-path`: mihomo å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„

#### å»¶è¿Ÿæµ‹è¯•å‚æ•°
- `--test-url`: æµ‹è¯•URL (é»˜è®¤: Google 204)
- `--delay-limit`: æœ€å¤§å»¶è¿Ÿé™åˆ¶ (é»˜è®¤: 4000ms)
- `--timeout`: è¯·æ±‚è¶…æ—¶æ—¶é—´ (é»˜è®¤: 6000ms)
- `--max-workers`: å»¶è¿Ÿæµ‹è¯•å¹¶å‘æ•° (é»˜è®¤: 100)

#### åœ°ç†ä½ç½®æ£€æµ‹å‚æ•°
- `--enable-geoip`: å¯ç”¨åœ°ç†ä½ç½®æ£€æµ‹ (é»˜è®¤: å…³é—­)
- `--geoip-workers`: åœ°ç†ä½ç½®æ£€æµ‹å¹¶å‘æ•° (é»˜è®¤: 5)
- `--geoip-timeout`: åœ°ç†ä½ç½®æ£€æµ‹è¶…æ—¶ (é»˜è®¤: 20ç§’)
- `--save-geoip-details`: ä¿å­˜è¯¦ç»†çš„åœ°ç†ä½ç½®ä¿¡æ¯

## ğŸŒ æ”¯æŒçš„åœ°åŒº

### åŸæœ‰åœ°åŒº (5ä¸ª)
- ğŸ‡­ğŸ‡° **é¦™æ¸¯** (HK) - Hong Kong
- ğŸ‡ºğŸ‡¸ **ç¾å›½** (US) - United States  
- ğŸ‡¯ğŸ‡µ **æ—¥æœ¬** (JP) - Japan
- ğŸ‡¬ğŸ‡§ **è‹±å›½** (UK) - United Kingdom
- ğŸ‡¸ğŸ‡¬ **æ–°åŠ å¡** (SG) - Singapore

### æ–°å¢åœ°åŒº (5ä¸ª)
- ğŸ‡¹ğŸ‡¼ **å°æ¹¾** (TW) - Taiwan
- ğŸ‡°ğŸ‡· **éŸ©å›½** (KR) - Korea
- ğŸ‡©ğŸ‡ª **å¾·å›½** (DE) - Germany
- ğŸ‡¨ğŸ‡¦ **åŠ æ‹¿å¤§** (CA) - Canada
- ğŸ‡¦ğŸ‡º **æ¾³å¤§åˆ©äºš** (AU) - Australia

### æ‰©å±•æ”¯æŒ (æ›´å¤šåœ°åŒº)
GeoIPæ£€æµ‹å™¨è¿˜æ”¯æŒè¯†åˆ«æ›´å¤šåœ°åŒºï¼š
- ğŸ‡«ğŸ‡· æ³•å›½ã€ğŸ‡³ğŸ‡± è·å…°ã€ğŸ‡·ğŸ‡º ä¿„ç½—æ–¯ã€ğŸ‡®ğŸ‡³ å°åº¦
- ğŸ‡¹ğŸ‡­ æ³°å›½ã€ğŸ‡²ğŸ‡¾ é©¬æ¥è¥¿äºšã€ğŸ‡µğŸ‡­ è²å¾‹å®¾ã€ğŸ‡»ğŸ‡³ è¶Šå—
- ğŸ‡®ğŸ‡© å°å°¼ã€ğŸ‡¹ğŸ‡· åœŸè€³å…¶ã€ğŸ‡¦ğŸ‡· é˜¿æ ¹å»·ã€ğŸ‡§ğŸ‡· å·´è¥¿

## ğŸ“Š å·¥ä½œæµç¨‹

### ç¬¬ä¸€é˜¶æ®µï¼šå»¶è¿Ÿæµ‹è¯•
```
è¾“å…¥èŠ‚ç‚¹ â†’ mihomoå¯åŠ¨ â†’ å¹¶å‘å»¶è¿Ÿæµ‹è¯• â†’ ç­›é€‰å¥åº·èŠ‚ç‚¹
```

### ç¬¬äºŒé˜¶æ®µï¼šåœ°ç†ä½ç½®æ£€æµ‹ (å¯é€‰)
```
å¥åº·èŠ‚ç‚¹ â†’ åˆ‡æ¢ä»£ç† â†’ è·å–å‡ºå£IP â†’ GeoIPæŸ¥è¯¢ â†’ é‡æ–°å‘½å
```

## ğŸ” èŠ‚ç‚¹é‡å‘½åè§„åˆ™

### é‡å‘½åå‰
```
- "Relay_ğŸ‡­ğŸ‡°HK-ğŸ‡­ğŸ‡°HK_123"
- "US-Premium-01"  
- "Japan-Tokyo-Fast"
- "å…è´¹èŠ‚ç‚¹-é¦™æ¸¯"
```

### é‡å‘½åå
```
- "ğŸ‡­ğŸ‡° é¦™æ¸¯ Relay_123"
- "ğŸ‡ºğŸ‡¸ ç¾å›½ Premium-01"
- "ğŸ‡¯ğŸ‡µ æ—¥æœ¬-ä¸œäº¬ Fast"  
- "ğŸ‡­ğŸ‡° é¦™æ¸¯ èŠ‚ç‚¹"
```

### å‘½åè§„åˆ™
1. **åœ°åŒºæ ‡è¯†**: `ğŸ‡­ğŸ‡° é¦™æ¸¯` (emoji + ä¸­æ–‡åç§°)
2. **åŸå¸‚ä¿¡æ¯**: `ğŸ‡¯ğŸ‡µ æ—¥æœ¬-ä¸œäº¬` (åŒ…å«åŸå¸‚æ—¶)
3. **åŸå§‹ä¿¡æ¯**: ä¿ç•™æ¸…ç†åçš„åŸå§‹èŠ‚ç‚¹ä¿¡æ¯
4. **æ™ºèƒ½æ¸…ç†**: è‡ªåŠ¨ç§»é™¤åŸåç§°ä¸­çš„é‡å¤åœ°åŒºæ ‡è¯†

## ğŸ› ï¸ æŠ€æœ¯å®ç°

### GeoIPæœåŠ¡
ä½¿ç”¨å¤šä¸ªGeoIPæœåŠ¡æä¾›å†—ä½™ï¼š
1. **ipapi.co** - ä¸»è¦æœåŠ¡
2. **ip-api.com** - å¤‡ç”¨æœåŠ¡  
3. **ipinfo.io** - å¤‡ç”¨æœåŠ¡

### å‡ºå£IPæ£€æµ‹
é€šè¿‡å¤šä¸ªIPæ£€æµ‹æœåŠ¡è·å–å‡ºå£IPï¼š
1. **api.ipify.org**
2. **ifconfig.me/ip**
3. **icanhazip.com**
4. **ipecho.net/plain**

### å®¹é”™æœºåˆ¶
- æœåŠ¡å¤±è´¥è‡ªåŠ¨åˆ‡æ¢åˆ°å¤‡ç”¨æœåŠ¡
- ç½‘ç»œè¶…æ—¶è‡ªåŠ¨é‡è¯•
- æ£€æµ‹å¤±è´¥ä¿æŒåŸå§‹èŠ‚ç‚¹åç§°

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### å¹¶å‘æ§åˆ¶
- å»¶è¿Ÿæµ‹è¯•ï¼šé»˜è®¤100å¹¶å‘
- åœ°ç†ä½ç½®æ£€æµ‹ï¼šé»˜è®¤5å¹¶å‘ (é¿å…APIé™åˆ¶)

### è¶…æ—¶è®¾ç½®
- å»¶è¿Ÿæµ‹è¯•ï¼š6ç§’è¶…æ—¶
- åœ°ç†ä½ç½®æ£€æµ‹ï¼š20ç§’è¶…æ—¶
- ä»£ç†åˆ‡æ¢ï¼š2ç§’ç­‰å¾…

### è¿›åº¦æŠ¥å‘Š
- æ¯100ä¸ªèŠ‚ç‚¹æŠ¥å‘Šå»¶è¿Ÿæµ‹è¯•è¿›åº¦
- æ¯20ä¸ªèŠ‚ç‚¹æŠ¥å‘Šåœ°ç†ä½ç½®æ£€æµ‹è¿›åº¦

## ğŸ”§ é›†æˆåˆ° GitHub Actions

### æ›´æ–° workflow æ–‡ä»¶
```yaml
# åœ¨ .github/workflows/clash-config.yml ä¸­
- name: Test All Nodes with GeoIP
  run: |
    python scripts/node_tester_with_geoip.py \
      --input-file all_unique_nodes.yaml \
      --output healthy_nodes_list.yaml \
      --clash-path /usr/local/bin/mihomo \
      --enable-geoip \
      --geoip-workers 3 \
      --geoip-timeout 15
```

### ç¯å¢ƒå˜é‡é…ç½®
```yaml
env:
  # åœ°ç†ä½ç½®æ£€æµ‹é…ç½®
  ENABLE_GEOIP: "true"
  GEOIP_WORKERS: "3"
  GEOIP_TIMEOUT: "15"
```

## ğŸ“‹ è¾“å‡ºæ–‡ä»¶

### æ ‡å‡†è¾“å‡º
```yaml
# healthy_nodes_list.yaml
proxies:
  - name: "ğŸ‡­ğŸ‡° é¦™æ¸¯ Premium-01"
    type: vmess
    server: example.com
    port: 443
    # ... å…¶ä»–é…ç½®
```

### è¯¦ç»†ä¿¡æ¯è¾“å‡º (å¯ç”¨ --save-geoip-details)
```yaml
# healthy_nodes_list_geoip_details.yaml
proxies:
  - name: "ğŸ‡­ğŸ‡° é¦™æ¸¯ Premium-01"
    type: vmess
    server: example.com
    port: 443
    _original_name: "HK-Premium-01"
    _exit_ip: "203.198.7.66"
    _location:
      country_code: "HK"
      city: "Hong Kong"
      region: "Hong Kong"
      service: "ipapi.co"
    _renamed: true
```

## âš ï¸ æ³¨æ„äº‹é¡¹

### APIé™åˆ¶
- æŸäº›GeoIPæœåŠ¡æœ‰è¯·æ±‚é¢‘ç‡é™åˆ¶
- å»ºè®®è®¾ç½®åˆç†çš„å¹¶å‘æ•° (3-5ä¸ª)
- é¿å…çŸ­æ—¶é—´å†…å¤§é‡è¯·æ±‚

### ç½‘ç»œè¦æ±‚
- éœ€è¦ç¨³å®šçš„ç½‘ç»œè¿æ¥
- æŸäº›åœ°åŒºå¯èƒ½æ— æ³•è®¿é—®éƒ¨åˆ†GeoIPæœåŠ¡
- å»ºè®®åœ¨ç½‘ç»œæ¡ä»¶è‰¯å¥½æ—¶è¿è¡Œ

### æ—¶é—´æˆæœ¬
- åœ°ç†ä½ç½®æ£€æµ‹ä¼šå¢åŠ æ€»è¿è¡Œæ—¶é—´
- 1000ä¸ªèŠ‚ç‚¹å¤§çº¦éœ€è¦é¢å¤–10-20åˆ†é’Ÿ
- å¯æ ¹æ®éœ€è¦è°ƒæ•´å¹¶å‘æ•°å’Œè¶…æ—¶æ—¶é—´

## ğŸ¯ æœ€ä½³å®è·µ

### æ¨èé…ç½®
```bash
# ç”Ÿäº§ç¯å¢ƒæ¨èé…ç½®
python scripts/node_tester_with_geoip.py \
  --input-file all_unique_nodes.yaml \
  --output healthy_nodes_list.yaml \
  --clash-path /usr/local/bin/mihomo \
  --enable-geoip \
  --geoip-workers 3 \
  --geoip-timeout 15 \
  --delay-limit 3000 \
  --max-workers 50
```

### è°ƒè¯•æ¨¡å¼
```bash
# è°ƒè¯•æ¨¡å¼ï¼šè¯¦ç»†æ—¥å¿— + ä¿å­˜è¯¦ç»†ä¿¡æ¯
LOG_LEVEL=DEBUG python scripts/node_tester_with_geoip.py \
  --input-file test_nodes.yaml \
  --output test_output.yaml \
  --clash-path /usr/local/bin/mihomo \
  --enable-geoip \
  --geoip-workers 1 \
  --geoip-timeout 30 \
  --save-geoip-details
```

## ğŸ”„ è¿ç§»æŒ‡å—

### ä»åŸç‰ˆæœ¬è¿ç§»
1. **ä¿æŒå…¼å®¹**: ä¸å¯ç”¨ `--enable-geoip` æ—¶åŠŸèƒ½å®Œå…¨ä¸€è‡´
2. **é€æ­¥å¯ç”¨**: å…ˆåœ¨å°è§„æ¨¡èŠ‚ç‚¹ä¸Šæµ‹è¯•
3. **ç›‘æ§æ€§èƒ½**: è§‚å¯Ÿè¿è¡Œæ—¶é—´å’ŒæˆåŠŸç‡
4. **è°ƒæ•´å‚æ•°**: æ ¹æ®å®é™…æƒ…å†µä¼˜åŒ–å¹¶å‘æ•°å’Œè¶…æ—¶æ—¶é—´

### å›é€€æ–¹æ¡ˆ
å¦‚éœ€å›é€€åˆ°åŸç‰ˆæœ¬ï¼š
```bash
# ä½¿ç”¨åŸå§‹çš„ node_tester.py
python scripts/node_tester.py \
  --input-file all_unique_nodes.yaml \
  --output healthy_nodes_list.yaml \
  --clash-path /usr/local/bin/mihomo
```

---

**ğŸ‰ ç°åœ¨æ‚¨å¯ä»¥äº«å—æ›´ç²¾ç¡®çš„åœ°ç†ä½ç½®è¯†åˆ«å’Œæ›´ä¸°å¯Œçš„åœ°åŒºæ”¯æŒï¼**